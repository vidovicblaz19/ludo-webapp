[{"C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\index.js":"1","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\App.js":"2","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\reportWebVitals.js":"3","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Frontpage.js":"4","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Register.js":"5","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Login.js":"6","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\JWTFrontpage.js":"7","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Profile.js":"8","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Unauthorized.js":"9","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Room.js":"10"},{"size":589,"mtime":1608982465922,"results":"11","hashOfConfig":"12"},{"size":3986,"mtime":1609193046993,"results":"13","hashOfConfig":"12"},{"size":362,"mtime":1608235527000,"results":"14","hashOfConfig":"12"},{"size":601,"mtime":1608235527000,"results":"15","hashOfConfig":"12"},{"size":1750,"mtime":1609082013204,"results":"16","hashOfConfig":"12"},{"size":1733,"mtime":1609082213317,"results":"17","hashOfConfig":"12"},{"size":3034,"mtime":1609192968691,"results":"18","hashOfConfig":"12"},{"size":1344,"mtime":1609104479027,"results":"19","hashOfConfig":"12"},{"size":647,"mtime":1609083626797,"results":"20","hashOfConfig":"12"},{"size":8077,"mtime":1609280254386,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"130v8e6",{"filePath":"25","messages":"26","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"24"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32","usedDeprecatedRules":"24"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"24"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"24"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"24"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\index.js",[],["48","49"],"C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\App.js",["50","51","52"],"import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch, useHistory } from 'react-router-dom';\nimport Frontpage from './Frontpage';\nimport JWTFrontpage from './JWTFrontpage';\nimport Register from './Register';\nimport Login from './Login';\nimport Profile from  './Profile';\nimport Unauthorized from './Unauthorized';\nimport Room from './Room';\nimport { io } from 'socket.io-client';\nimport jwt from 'jsonwebtoken';\nconst ENDPOINT = \"http://127.0.0.1:4000\";\nconst ENDPOINTAUTH = \"http://127.0.0.1:4000/auth\";\nvar socket = io(ENDPOINT);\nvar socketauth = null;\nconst jwtToken = localStorage.getItem('jwt');\n//JsonWebTokenSecret\nconst accessTokenSecret = 'jsonWebTokenWeakSecret';\n\nconst  authenticateJWT = () => {\n  // Gather the jwt access token from the request header\n  if (jwtToken == null) return false; // if there isn't any token\n  let decodedjwt;\n  try {\n    decodedjwt = jwt.verify(jwtToken, accessTokenSecret);\n  } catch(err) {\n    return false;\n  }\n    return true;\n}\n\nif(authenticateJWT()){\n  socketauth = io(ENDPOINTAUTH, {\n    auth: {\n      jwt: jwtToken,\n    }\n  });\n}\n\nfunction App() {\n  //const [jwtToken,setJwtToken] = useState();\n  let history = useHistory();\n\n  useEffect(() => {\n\n  },[]);\n\n  const handleRegisterSubmitUserData = (event,user) => {\n    event.preventDefault();\n    const User = {\n      username: user.username,\n      password: user.password\n    };\n    socket.emit('register', User, (resp) => {\n      alert(resp);\n      history.push(\"/\");\n    });\n  }\n\n  const handleLoginSubmitUserData = (event,user) => {\n    event.preventDefault();\n    const User = {\n      username: user.username,\n      password: user.password\n    };\n    socket.emit('login', User, (resp) => {\n      if(resp.jwt == null){\n        alert(\"Login failed.\")\n      }else{\n        alert(\"Login successful.\")\n        localStorage.setItem('jwt', resp.jwt);\n        socketauth = io(ENDPOINTAUTH);\n        history.push(\"/\");\n      }\n    });\n  }\n\n  const FrontpageComponent = () => {\n    return (\n      <React.Fragment>\n      <Frontpage/>\n      </React.Fragment>\n    );\n  }\n\n  const JWTFrontpageComponent = () => {\n    return (\n      <React.Fragment>\n      <JWTFrontpage socketauth={socketauth}/>\n      </React.Fragment>\n    );\n  }\n\n  const ProfileComponent = () => {\n    return (\n      <React.Fragment>\n      <Profile socketauth={socketauth}/>\n      </React.Fragment>\n    );\n  }\n\n  const UnauthorizedComponent = () => {\n    return (\n      <React.Fragment>\n      <Unauthorized/>\n      </React.Fragment>\n    );\n  }\n\n  const RegisterComponent = () => {\n    return (\n      <React.Fragment>\n      <Register handleRegisterSubmitUserData={(event,user) => handleRegisterSubmitUserData(event, user)}/>\n      </React.Fragment>\n    );\n  }\n\n  const LoginComponent = () => {\n    return (\n      <React.Fragment>\n      <Login handleLoginSubmitUserData={(event,user) => handleLoginSubmitUserData(event, user)}/>\n      </React.Fragment>\n    );\n  }\n\n  const RoomComponent = () => {\n    return (\n      <React.Fragment>\n      <Room socketauth={socketauth} />\n      </React.Fragment>\n    );\n  }\n\n  const SecureRoute = (props) => {\n    if(authenticateJWT()){\n      //user has valid jwt\n      return(\n        <Route path={props.path} component={props.JWTcomponent}/>\n      );\n    }else{  //no valid jwt\n      return(\n        <Route path={props.path} component={props.component}/>\n        \n      );\n    }\n  }\n\n  return (\n    <div className=\"App\">\n        <Switch>\n          <SecureRoute path=\"/\" JWTcomponent={JWTFrontpageComponent} component={FrontpageComponent} exact/>\n          <Route path=\"/login\" component={LoginComponent} />\n          <Route path=\"/register\" component={RegisterComponent} />\n          <SecureRoute path=\"/profile\" JWTcomponent={ProfileComponent} component={UnauthorizedComponent} />\n          <SecureRoute path=\"/room\" JWTcomponent={RoomComponent} component={UnauthorizedComponent} />\n        </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\reportWebVitals.js",[],"C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Frontpage.js",["53"],"import React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport {Link} from 'react-router-dom';\n\nfunction Frontpage() {\n  return (\n    <div className=\"Frontpage\">\n      <h3>Draw-webapp</h3>\n      <div>\n        <Link to='/register'>\n          <Button variant=\"contained\" color=\"primary\">\n              Register\n          </Button>\n          </Link>\n      </div>\n      <div>\n        <Link to='/login'>\n          <Button variant=\"contained\" color=\"primary\">\n              Login\n          </Button>\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default Frontpage;\n","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Register.js",[],"C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Login.js",[],"C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\JWTFrontpage.js",["54","55","56","57","58","59","60"],"import React, { Component, useState, useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport {Link, useHistory} from 'react-router-dom';\nimport List from '@material-ui/core/List';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Ballot from '@material-ui/icons/Ballot';\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\nimport Add from '@material-ui/icons/Add';\nimport ModifyIcon from '@material-ui/icons/Create';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport { PinDropSharp } from '@material-ui/icons';\n\nfunction JWTFrontpage(props) {\n  const [roomlist, setRoomlist] = useState([]);\n  var history = useHistory();\n\n  useEffect(() => {\n    //refresh frontpage\n    if(props.socketauth != null){\n      props.socketauth.on('frontpage_update_by_server', resp => {\n        setRoomlist(resp);\n      });\n    }\n  },[]);\n\n  const handleCreateroomClick = (event) => {\n    //create new room on backend\n    event.preventDefault();\n    props.socketauth.emit('createroom', {}, (resp) => {\n      setRoomlist(resp);\n    });\n  }\n\n  const handleRoomJoinClick = (event,roomid) => {\n    //create new room on backend\n    //console.log(roomname);\n    props.socketauth.emit('joinroom', {roomid: roomid}, (resp) => {\n      //console.log(resp);\n      //setRoomlist(resp);\n      history.push(\"/room/\"+roomid);\n    });\n  }\n\n  return (\n    <div className=\"JWTFrontpage\">\n      <div className=\"Frontpage-topbar\">\n        <h3>Draw-webapp</h3>\n        <div>\n          <div>\n            <Button variant=\"contained\" color=\"primary\" onClick={(event) => handleCreateroomClick(event)}>\n                Create Room\n            </Button>\n              <Link className=\"Button\" to='/profile'>\n            <Button variant=\"contained\" color=\"primary\">\n                Profil\n            </Button>\n          </Link>\n          </div>\n        </div>\n      </div>\n      <div className=\"Frontpage-content\">\n        <h5>Available rooms: <Button variant=\"contained\" color=\"primary\">\n                Refresh\n            </Button></h5>\n        \n        <div>\n          <List>\n            \n        {roomlist.map(item => {\n          let players = []; let socket = {};\n          for( socket of item.sockets){\n            players.push(socket.username);\n          }\n          return(\n            <ListItem onClick={(event) => handleRoomJoinClick(event,item._id)} button key={item.name} >\n              <ListItemIcon><MeetingRoomIcon/></ListItemIcon>\n              <ListItemText primary={item.name} secondary={players+\"\"}  />\n              <ListItemSecondaryAction>\n                <ListItemText edge=\"end\" primary={item.sockets.length+\"/8\"} />\n              </ListItemSecondaryAction>\n            </ListItem>\n          );\n          })}\n          </List>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default JWTFrontpage;\n","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Profile.js",["61"],"import React, { useEffect, useState } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport {Link} from 'react-router-dom';\r\nimport socket from 'socket.io-client';\r\n\r\nfunction Profile(props) {\r\n    const [response,setResponse] = useState({\r\n        username:\"\",\r\n        nrofgames:0,\r\n        wins:0,\r\n        totalpoints:0,\r\n    });\r\n  \r\n  const handleGetProfileData = (props) => {\r\n    props.socketauth.emit('profile', {}, (resp) => {\r\n      setResponse(resp);\r\n    });\r\n  }\r\n\r\n    useEffect(() => {\r\n      handleGetProfileData(props);\r\n    },[props]);\r\n\r\n  return (\r\n    <div className=\"Profile\">\r\n      <div className=\"Profile-topbar\">\r\n        <h3>Draw-webapp</h3>\r\n        <div>\r\n          <div>\r\n          <Link className=\"Button\" to='/'>\r\n            <Button variant=\"contained\" color=\"primary\">\r\n                Back\r\n            </Button>\r\n          </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"Profile-content\">\r\n        <h4>[User profile] </h4>\r\n        <div className=\"Profile-content2\">\r\n            <p>username: {response.username}</p>\r\n            <p>number of games played: {response.nrofgames}</p>\r\n            <p>wins: {response.wins}</p>\r\n            <p>total points: {response.totalpoints}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Unauthorized.js",["62"],"import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport {Link} from 'react-router-dom';\r\n\r\nfunction Unauthorized() {\r\n  return (\r\n    <div className=\"Frontpage\">\r\n      <h3>Error user unauthorized.</h3>\r\n      <div>\r\n        <Link to='/register'>\r\n          <Button variant=\"contained\" color=\"primary\">\r\n              Register\r\n          </Button>\r\n          </Link>\r\n      </div>\r\n      <div>\r\n        <Link to='/login'>\r\n          <Button variant=\"contained\" color=\"primary\">\r\n              Login\r\n          </Button>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Unauthorized;\r\n","C:\\Users\\blazv\\Documents\\Github\\drawChat-webapp\\drawchat-client\\src\\Room.js",["63","64","65","66","67","68","69","70","71","72","73","74"],{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","replacedBy":"78"},{"ruleId":"79","severity":1,"message":"80","line":1,"column":17,"nodeType":"81","messageId":"82","endLine":1,"endColumn":25},{"ruleId":"79","severity":1,"message":"83","line":3,"column":10,"nodeType":"81","messageId":"82","endLine":3,"endColumn":23},{"ruleId":"79","severity":1,"message":"84","line":26,"column":5,"nodeType":"81","messageId":"82","endLine":26,"endColumn":15},{"ruleId":"79","severity":1,"message":"85","line":1,"column":17,"nodeType":"81","messageId":"82","endLine":1,"endColumn":26},{"ruleId":"79","severity":1,"message":"85","line":1,"column":17,"nodeType":"81","messageId":"82","endLine":1,"endColumn":26},{"ruleId":"79","severity":1,"message":"86","line":5,"column":8,"nodeType":"81","messageId":"82","endLine":5,"endColumn":18},{"ruleId":"79","severity":1,"message":"87","line":9,"column":8,"nodeType":"81","messageId":"82","endLine":9,"endColumn":14},{"ruleId":"79","severity":1,"message":"88","line":11,"column":8,"nodeType":"81","messageId":"82","endLine":11,"endColumn":11},{"ruleId":"79","severity":1,"message":"89","line":12,"column":8,"nodeType":"81","messageId":"82","endLine":12,"endColumn":18},{"ruleId":"79","severity":1,"message":"90","line":14,"column":10,"nodeType":"81","messageId":"82","endLine":14,"endColumn":22},{"ruleId":"91","severity":1,"message":"92","line":27,"column":5,"nodeType":"93","endLine":27,"endColumn":7,"suggestions":"94"},{"ruleId":"79","severity":1,"message":"95","line":4,"column":8,"nodeType":"81","messageId":"82","endLine":4,"endColumn":14},{"ruleId":"79","severity":1,"message":"85","line":1,"column":17,"nodeType":"81","messageId":"82","endLine":1,"endColumn":26},{"ruleId":"79","severity":1,"message":"96","line":6,"column":9,"nodeType":"81","messageId":"82","endLine":6,"endColumn":13},{"ruleId":"79","severity":1,"message":"86","line":8,"column":8,"nodeType":"81","messageId":"82","endLine":8,"endColumn":18},{"ruleId":"79","severity":1,"message":"87","line":12,"column":8,"nodeType":"81","messageId":"82","endLine":12,"endColumn":14},{"ruleId":"79","severity":1,"message":"97","line":13,"column":8,"nodeType":"81","messageId":"82","endLine":13,"endColumn":23},{"ruleId":"79","severity":1,"message":"88","line":15,"column":8,"nodeType":"81","messageId":"82","endLine":15,"endColumn":11},{"ruleId":"79","severity":1,"message":"98","line":19,"column":10,"nodeType":"81","messageId":"82","endLine":19,"endColumn":16},{"ruleId":"79","severity":1,"message":"99","line":21,"column":8,"nodeType":"81","messageId":"82","endLine":21,"endColumn":11},{"ruleId":"79","severity":1,"message":"100","line":28,"column":7,"nodeType":"81","messageId":"82","endLine":28,"endColumn":24},{"ruleId":"79","severity":1,"message":"101","line":34,"column":28,"nodeType":"81","messageId":"82","endLine":34,"endColumn":33},{"ruleId":"79","severity":1,"message":"102","line":34,"column":34,"nodeType":"81","messageId":"82","endLine":34,"endColumn":40},{"ruleId":"79","severity":1,"message":"103","line":34,"column":41,"nodeType":"81","messageId":"82","endLine":34,"endColumn":46},{"ruleId":"91","severity":1,"message":"104","line":97,"column":7,"nodeType":"93","endLine":97,"endColumn":25,"suggestions":"105"},"no-native-reassign",["106"],"no-negated-in-lhs",["107"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'BrowserRouter' is defined but never used.","'decodedjwt' is assigned a value but never used.","'Component' is defined but never used.","'IconButton' is defined but never used.","'Ballot' is defined but never used.","'Add' is defined but never used.","'ModifyIcon' is defined but never used.","'PinDropSharp' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'props.socketauth'. Either include it or remove the dependency array.","ArrayExpression",["108"],"'socket' is defined but never used.","'Link' is defined but never used.","'MeetingRoomIcon' is defined but never used.","'Socket' is defined but never used.","'jwt' is defined but never used.","'accessTokenSecret' is assigned a value but never used.","'pause' is assigned a value but never used.","'resume' is assigned a value but never used.","'reset' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'start'. Either include it or remove the dependency array.",["109"],"no-global-assign","no-unsafe-negation",{"desc":"110","fix":"111"},{"desc":"112","fix":"113"},"Update the dependencies array to be: [props.socketauth]",{"range":"114","text":"115"},"Update the dependencies array to be: [props.socketauth, start]",{"range":"116","text":"117"},[1066,1068],"[props.socketauth]",[3715,3733],"[props.socketauth, start]"]